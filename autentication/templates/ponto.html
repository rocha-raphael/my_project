{% load static %}

<link rel="stylesheet" href="{% static 'css/estilo_ponto.css' %}">

<div class="ponto">
    <h1>Bater Ponto</h1>
    <form action="{% url 'ponto' %}" method="post">{% csrf_token %}

    <label for="nome_usuario">Nome do Usuário:</label>
    <input type="text" id="nome_usuario" name="login_ponto" value='{{ nome_usuario }}' readonly>

    <button onclick="baterPonto()">Bater Ponto</button>
</form>
    <div id="clock"></div>
    <div id="mensagem"></div>

    <script type="text/javascript">
        var nome_usuario = "{{ nome_usuario }}"; // Atribui o valor da variável de template tetste
        var endpoint = "{% url 'ponto' %}";

    </script>
    <script src="{% static 'javascript/ponto.js' %}"></script> 

<script type="text/javascript">
            function enviarParaServidor(valorRelogio) {
            var xhr = new XMLHttpRequest();
            xhr.open("POST", endpoint, true);
            xhr.setRequestHeader("Content-Type", "application/json;charset=UTF-8");

            // Monta o objeto de dados a serem enviados ao servidor
            var dados = {
                nome_usuario: nome_usuario,
                valor_relogio: valorRelogio
            };

            // Converte o objeto em formato JSON
            var jsonData = JSON.stringify(dados);

            // Envia a requisição
            xhr.send(jsonData);
        }
    </script>

</div>

